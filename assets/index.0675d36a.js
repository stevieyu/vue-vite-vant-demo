import{A as p,C as E,b as n,T as O,D as F,E as N,H as q,G,J as A,K as S,d as y,L as C,I as U,q as J,f as B,M as Q,y as I,N as V,g as W,O as X,P as Z,Q as ee,R as te,S as R,U as ne,V as ae,W as re,o as k,c as L,a as ie,w as x,n as w,F as $,X as D,k as M,t as oe,x as ce,B as le}from"./index.56d0a142.js";import{a as se}from"./index.es.6d1ee1b7.js";const[de,z]=p("tag"),ue={size:String,mark:Boolean,show:F,type:N("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var fe=E({name:de,props:ue,emits:["close"],setup(e,{slots:t,emit:s}){const f=c=>{c.stopPropagation(),s("close",c)},g=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},v=()=>{var c;const{type:_,mark:r,plain:o,round:u,size:d,closeable:b}=e,a={mark:r,plain:o,round:u};d&&(a[d]=d);const m=b&&n(G,{name:"cross",class:[z("close"),q],onClick:f},null);return n("span",{style:g(),class:z([a,_])},[(c=t.default)==null?void 0:c.call(t),m])};return()=>n(O,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?v():null]})}});const Y=A(fe),[me,l]=p("card"),ge={tag:String,num:C,desc:String,thumb:String,title:String,price:C,centered:Boolean,lazyLoad:Boolean,currency:N("\xA5"),thumbLink:String,originPrice:C};var he=E({name:me,props:ge,emits:["clickThumb"],setup(e,{slots:t,emit:s}){const f=()=>{if(t.title)return t.title();if(e.title)return n("div",{class:[l("title"),"van-multi-ellipsis--l2"]},[e.title])},g=()=>{if(t.tag||e.tag)return n("div",{class:l("tag")},[t.tag?t.tag():n(Y,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},v=()=>t.thumb?t.thumb():n(U,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),c=()=>{if(t.thumb||e.thumb)return n("a",{href:e.thumbLink,class:l("thumb"),onClick:o=>s("clickThumb",o)},[v(),g()])},_=()=>{if(t.desc)return t.desc();if(e.desc)return n("div",{class:[l("desc"),"van-ellipsis"]},[e.desc])},r=()=>{const o=e.price.toString().split(".");return n("div",null,[n("span",{class:l("price-currency")},[e.currency]),n("span",{class:l("price-integer")},[o[0]]),y("."),n("span",{class:l("price-decimal")},[o[1]])])};return()=>{var o,u,d;const b=t.num||S(e.num),a=t.price||S(e.price),m=t["origin-price"]||S(e.originPrice),i=b||a||m||t.bottom,h=a&&n("div",{class:l("price")},[t.price?t.price():r()]),P=m&&n("div",{class:l("origin-price")},[t["origin-price"]?t["origin-price"]():`${e.currency} ${e.originPrice}`]),j=b&&n("div",{class:l("num")},[t.num?t.num():`x${e.num}`]),H=t.footer&&n("div",{class:l("footer")},[t.footer()]),K=i&&n("div",{class:l("bottom")},[(o=t["price-top"])==null?void 0:o.call(t),h,P,j,(u=t.bottom)==null?void 0:u.call(t)]);return n("div",{class:l()},[n("div",{class:l("header")},[c(),n("div",{class:l("content",{centered:e.centered})},[n("div",null,[f(),_(),(d=t.tags)==null?void 0:d.call(t)]),K])]),H])}}});const ve=A(he),_e=Symbol(),be=()=>J(_e,null),[xe,T,Te]=p("list"),ke={error:Boolean,offset:ee(300),loading:Boolean,finished:Boolean,errorText:String,direction:N("down"),loadingText:String,finishedText:String,immediateCheck:F};var we=E({name:xe,props:ke,emits:["load","update:error","update:loading"],setup(e,{emit:t,slots:s}){const f=B(!1),g=B(),v=B(),c=be(),_=Q(g),r=()=>{te(()=>{if(f.value||e.finished||e.error||(c==null?void 0:c.value)===!1)return;const{offset:a,direction:m}=e,i=R(_);if(!i.height||ne(g))return;let h=!1;const P=R(v);m==="up"?h=i.top-P.top<=a:h=P.bottom-i.bottom<=a,h&&(f.value=!0,t("update:loading",!0),t("load"))})},o=()=>{if(e.finished){const a=s.finished?s.finished():e.finishedText;if(a)return n("div",{class:T("finished-text")},[a])}},u=()=>{t("update:error",!1),r()},d=()=>{if(e.error){const a=s.error?s.error():e.errorText;if(a)return n("div",{role:"button",class:T("error-text"),tabindex:0,onClick:u},[a])}},b=()=>{if(f.value&&!e.finished)return n("div",{class:T("loading")},[s.loading?s.loading():n(ae,{class:T("loading-icon")},{default:()=>[e.loadingText||Te("loading")]})])};return I(()=>[e.loading,e.finished,e.error],r),c&&I(c,a=>{a&&r()}),V(()=>{f.value=e.loading}),W(()=>{e.immediateCheck&&r()}),X({check:r}),Z("scroll",r,{target:_}),()=>{var a;const m=(a=s.default)==null?void 0:a.call(s),i=n("div",{ref:v,class:T("placeholder")},null);return n("div",{ref:g,role:"feed",class:T(),"aria-busy":f.value},[e.direction==="down"?m:i,b(),o(),d(),e.direction==="up"?m:i])}}});const Pe=A(we);const ye={class:"flex justify-between items-center"},Se=y(" refresh "),Ce=y(" API docs "),$e={__name:"index",setup(e){let t=0;re(()=>{t=window.scrollY}),V(()=>{t>0&&window.scrollY!==t&&window.scrollTo(0,t)});const s=async({page:r}={})=>{const o=r?r+1:1,u=new URL("https://dev.to/api/articles");u.searchParams.append("page",o);let d=await(await fetch(u,{})).json();return r>=2&&(d=[]),{list:d,page:o,finished:d.length===0}},{dataList:f,loadMore:g,noMore:v,loading:c,refresh:_}=se(s,{isNoMore:r=>(r==null?void 0:r.finished)===!0,manual:!0});return(r,o)=>{const u=le,d=U,b=Y,a=ve,m=Pe;return k(),L($,null,[ie("div",ye,[n(u,{onClick:w(_)},{default:x(()=>[Se]),_:1},8,["onClick"]),n(u,{url:"https://developers.forem.com/api"},{default:x(()=>[Ce]),_:1})]),n(m,{loading:w(c),"onUpdate:loading":o[0]||(o[0]=i=>ce(c)?c.value=i:null),finished:w(v),"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:w(g)},{default:x(()=>[(k(!0),L($,null,D(w(f),i=>(k(),M(a,{onClick:h=>r.$router.push(`/posts/${i.id}`),key:i.title,desc:i.description,title:i.title},{thumb:x(()=>[n(d,{width:"5.5rem",height:"5.5rem",fit:"cover",src:i.cover_image?i.cover_image:""},null,8,["src"])]),tags:x(()=>[(k(!0),L($,null,D(i.tag_list,h=>(k(),M(b,{key:h,class:"mx-px",plain:"",type:"primary"},{default:x(()=>[y(oe(h),1)]),_:2},1024))),128))]),_:2},1032,["onClick","desc","title"]))),128))]),_:1},8,["loading","finished","onLoad"])],64)}}};export{$e as default};
