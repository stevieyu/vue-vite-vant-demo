import{n as oe,q as ae,g as b,D as _e,E as L,G as F,H as Pe,y as W,I as Le,j as Ae,d as P,J as N,K as Q,v as te,z as xe,L as Oe,M as re,N as ce,O as Ce,x as se,P as De,r as Ie,Q as $e,R as H,S as Be,T as Ne,U as Me,s as pe,V as U,W as ke,X as K,Y as ie,Z as Fe}from"./app-2b400393.js";const[We,M]=oe("image"),je={src:String,alt:String,fit:String,position:String,round:Boolean,width:N,height:N,radius:N,lazyLoad:Boolean,iconSize:N,showError:Q,errorIcon:te("photo-fail"),iconPrefix:String,showLoading:Q,loadingIcon:te("photo")};var He=ae({name:We,props:je,emits:["load","error"],setup(e,{emit:r,slots:n}){const t=b(!1),a=b(!0),c=b(),{$Lazyload:s}=_e().proxy,o=L(()=>{const f={width:F(e.width),height:F(e.height)};return Pe(e.radius)&&(f.overflow="hidden",f.borderRadius=F(e.radius)),f});W(()=>e.src,()=>{t.value=!1,a.value=!0});const l=f=>{a.value=!1,r("load",f)},d=f=>{t.value=!0,a.value=!1,r("error",f)},h=(f,v,y)=>y?y():P(Ce,{name:f,size:e.iconSize,class:v,classPrefix:e.iconPrefix},null),T=()=>{if(a.value&&e.showLoading)return P("div",{class:M("loading")},[h(e.loadingIcon,M("loading-icon"),n.loading)]);if(t.value&&e.showError)return P("div",{class:M("error")},[h(e.errorIcon,M("error-icon"),n.error)])},E=()=>{if(t.value||!e.src)return;const f={alt:e.alt,class:M("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?xe(P("img",re({ref:c},f),null),[[Oe("lazy"),e.src]]):P("img",re({src:e.src,onLoad:l,onError:d},f),null)},S=({el:f})=>{const v=()=>{f===c.value&&a.value&&l()};c.value?v():ce(v)},m=({el:f})=>{f===c.value&&!t.value&&d()};return s&&Le&&(s.$on("loaded",S),s.$on("error",m),Ae(()=>{s.$off("loaded",S),s.$off("error",m)})),()=>{var f;return P("div",{class:M({round:e.round}),style:o.value},[E(),T(),(f=n.default)==null?void 0:f.call(n)])}}});const _n=se(He),[Ue,p,Ve]=oe("pull-refresh"),de=50,ze=["pulling","loosing","success"],Qe={disabled:Boolean,modelValue:Boolean,headHeight:H(de),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:N,successDuration:H(500),animationDuration:H(300)};var Ge=ae({name:Ue,props:Qe,emits:["change","refresh","update:modelValue"],setup(e,{emit:r,slots:n}){let t;const a=b(),c=De(a),s=Ie({status:"normal",distance:0,duration:0}),o=$e(),l=()=>{if(e.headHeight!==de)return{height:`${e.headHeight}px`}},d=()=>s.status!=="loading"&&s.status!=="success"&&!e.disabled,h=u=>{const i=+(e.pullDistance||e.headHeight);return u>i&&(u<i*2?u=i+(u-i)/2:u=i*1.5+(u-i*2)/4),Math.round(u)},T=(u,i)=>{const g=+(e.pullDistance||e.headHeight);s.distance=u,i?s.status="loading":u===0?s.status="normal":u<g?s.status="pulling":s.status="loosing",r("change",{status:s.status,distance:u})},E=()=>{const{status:u}=s;return u==="normal"?"":e[`${u}Text`]||Ve(u)},S=()=>{const{status:u,distance:i}=s;if(n[u])return n[u]({distance:i});const g=[];return ze.includes(u)&&g.push(P("div",{class:p("text")},[E()])),u==="loading"&&g.push(P(Be,{class:p("loading")},{default:E})),g},m=()=>{s.status="success",setTimeout(()=>{T(0)},+e.successDuration)},f=u=>{t=Me(c.value)===0,t&&(s.duration=0,o.start(u))},v=u=>{d()&&f(u)},y=u=>{if(d()){t||f(u);const{deltaY:i}=o;o.move(u),t&&i.value>=0&&o.isVertical()&&(Ne(u),T(h(i.value)))}},w=()=>{t&&o.deltaY.value&&d()&&(s.duration=+e.animationDuration,s.status==="loosing"?(T(+e.headHeight,!0),r("update:modelValue",!0),ce(()=>r("refresh"))):T(0))};return W(()=>e.modelValue,u=>{s.duration=+e.animationDuration,u?T(+e.headHeight,!0):n.success||e.successText?m():T(0,!1)}),()=>{var u;const i={transitionDuration:`${s.duration}ms`,transform:s.distance?`translate3d(0,${s.distance}px, 0)`:""};return P("div",{ref:a,class:p()},[P("div",{class:p("track"),style:i,onTouchstart:v,onTouchmove:y,onTouchend:w,onTouchcancel:w},[P("div",{class:p("head"),style:l()},[S()]),(u=n.default)==null?void 0:u.call(n)])])}}});const Pn=se(Ge),[Ye,k]=oe("skeleton"),fe="100%",Ke="60%",Xe={row:H(0),title:Boolean,round:Boolean,avatar:Boolean,loading:Q,animate:Q,avatarSize:N,titleWidth:N,avatarShape:te("round"),rowWidth:{type:[Number,String,Array],default:fe}};var Je=ae({name:Ye,inheritAttrs:!1,props:Xe,setup(e,{slots:r,attrs:n}){const t=()=>{if(e.avatar)return P("div",{class:k("avatar",e.avatarShape),style:pe(e.avatarSize)},null)},a=()=>{if(e.title)return P("h3",{class:k("title"),style:{width:F(e.titleWidth)}},null)},c=o=>{const{rowWidth:l}=e;return l===fe&&o===+e.row-1?Ke:Array.isArray(l)?l[o]:l},s=()=>Array(+e.row).fill("").map((o,l)=>P("div",{class:k("row"),style:{width:F(c(l))}},null));return()=>{var o;return e.loading?P("div",re({class:k({animate:e.animate,round:e.round})},n),[t(),P("div",{class:k("content")},[a(),s()])]):(o=r.default)==null?void 0:o.call(r)}}});const Ln=se(Je);const Ze={origin:""};const qe={},en=Symbol("GLOBAL_OPTIONS_PROVIDE_KEY"),nn=()=>qe,X=e=>e!==null&&typeof e=="object",G=e=>e instanceof Function,j=e=>e==null,le=typeof window>"u",ve=()=>{var e;return le||j((e=window.document)===null||e===void 0?void 0:e.visibilityState)?!0:window.document.visibilityState==="visible"},tn=()=>{var e,r;return(e=!le&&((r=window.navigator)===null||r===void 0?void 0:r.onLine))!==null&&e!==void 0?e:!0},J=()=>new Promise(()=>{});function rn(e,r){const n=Object.assign({},e);for(const t of r)delete n[t];return n}const on=(e,r=!1)=>{const n=`Warning: [vue-request] ${e}`;if(r)return new Error(n);console.error(n)},O=e=>Fe(e)?e.value:e,V=new Map,an=e=>j(e)?void 0:V.get(e),sn=(e,r,n)=>{const t=V.get(e);t!=null&&t.timer&&clearTimeout(t.timer);const a=setTimeout(()=>V.delete(e),r);V.set(e,{...n,timer:a})},C=e=>e;function me(e,r,n){let t,a,c,s,o,l,d=0,h=!1,T=!1,E=!0;const S=!r&&r!==0&&typeof window.requestAnimationFrame=="function";if(typeof e!="function")throw new TypeError("Expected a function");r=+r||0,X(n)&&(h=!!n.leading,T="maxWait"in n,c=T?Math.max(+n.maxWait||0,r):c,E="trailing"in n?!!n.trailing:E);function m(R){const x=t,$=a;return t=a=void 0,d=R,s=e.apply($,x),s}function f(R,x){return S?(window.cancelAnimationFrame(o),window.requestAnimationFrame(R)):setTimeout(R,x)}function v(R){if(S)return window.cancelAnimationFrame(R);clearTimeout(R)}function y(R){return d=R,o=f(i,r),h?m(R):s}function w(R){const x=R-l,$=R-d,ue=r-x;return T?Math.min(ue,c-$):ue}function u(R){const x=R-l,$=R-d;return l===void 0||x>=r||x<0||T&&$>=c}function i(){const R=Date.now();if(u(R))return g(R);o=f(i,w(R))}function g(R){return o=void 0,E&&t?m(R):(t=a=void 0,s)}function _(){o!==void 0&&v(o),d=0,t=l=a=o=void 0}function D(){return o===void 0?s:g(Date.now())}function A(){return o!==void 0}function I(...R){const x=Date.now(),$=u(x);if(t=R,a=this,l=x,$){if(o===void 0)return y(l);if(T)return o=f(i,r),m(l)}return o===void 0&&(o=f(i,r)),s}return I.cancel=_,I.flush=D,I.pending=A,I}function ln(e,r,n){let t=!0,a=!0;if(typeof e!="function")throw new TypeError("Expected a function");return X(n)&&(t="leading"in n?!!n.leading:t,a="trailing"in n?!!n.trailing:a),me(e,r,{leading:t,trailing:a,maxWait:r})}var ge=C((e,{debounceInterval:r,debounceOptions:n,manual:t})=>{const a=b(!1),c=b(),s=L(()=>n),o=L(()=>O(r)),l=b(e.context.runAsync);return t||(a.value=!0),ie(d=>{j(o.value)||(c.value=me(h=>h(),o.value,s.value),e.context.runAsync=(...h)=>new Promise((T,E)=>{a.value?(a.value=!1,l.value(...h).then(T).catch(E)):c.value(()=>{l.value(...h).then(T).catch(E)})}),d(()=>{var h;(h=c.value)===null||h===void 0||h.cancel(),e.context.runAsync=l.value}))}),{onCancel(){var d;(d=c.value)===null||d===void 0||d.cancel()}}}),he=C((e,{errorRetryCount:r=0,errorRetryInterval:n=0})=>{const t=b(),a=b(0),c=L(()=>O(r)),s=L(()=>O(n));let o=!1;const l=()=>{a.value=0},d=L(()=>{if(s.value)return s.value;const E=1e3,S=1,m=9,f=Math.floor(Math.random()*2**Math.min(a.value,m)+S);return E*f}),h=()=>{let E;const S=c.value===-1,m=a.value<c.value;return(S||m)&&(S||(a.value+=1),E=setTimeout(()=>{o=!0,e.context.refresh()},d.value)),()=>E&&clearTimeout(E)},T=()=>{t.value&&t.value()};return{onBefore(){o||l(),o=!1,T()},onSuccess(){l()},onError(){t.value=h()},onCancel(){l(),T()}}}),Te=C((e,{ready:r=b(!0),manual:n,defaultParams:t=[]})=>(W(r,a=>{!n&&a&&e.context.run(...t)},{flush:"sync"}),{onBefore(){if(!r.value)return e.loading.value=!1,{isBreak:!0}}})),we=C((e,{refreshDeps:r=[],refreshDepsAction:n,manual:t})=>(r!=null&&r.length&&W(r,()=>{n?n():!t&&e.context.refresh()}),{})),Ee=C((e,{throttleInterval:r,throttleOptions:n})=>{const t=b(),a=L(()=>O(r)),c=L(()=>n),s=b(e.context.runAsync);return ie(o=>{if(j(r))return{};t.value=ln(l=>l(),a.value,c.value),e.context.runAsync=(...l)=>new Promise((d,h)=>{t.value(()=>{s.value(...l).then(d).catch(h)})}),o(()=>{var l;(l=t.value)===null||l===void 0||l.cancel(),e.context.runAsync=s.value})}),{onCancel(){var o;(o=t.value)===null||o===void 0||o.cancel()}}});const un=(e,r)=>n=>{Object.keys(n).forEach(t=>{e[t].value=n[t]}),r.forEach(t=>t(e))},cn=(e,r)=>()=>{let n=r;for(let t=e.length;t-- >0;)n=e[t](n);return n()},dn=(e,r,n)=>{var t,a;const{initialData:c,onSuccess:s,onError:o,onBefore:l,onAfter:d}=r,h=b((t=n==null?void 0:n.loading)!==null&&t!==void 0?t:!1),T=U((a=n==null?void 0:n.data)!==null&&a!==void 0?a:c),E=U(n==null?void 0:n.error),S=b(n==null?void 0:n.params),m=b([]),f=U("pending"),v={},y=un({status:f,loading:h,data:T,error:E,params:S},[]),w=(i,...g)=>{if(i==="onQuery"){const _=m.value.map(D=>D.onQuery).filter(Boolean);return{servicePromise:cn(_,g[0])()}}else{const _=m.value.map(D=>{var A;return(A=D[i])===null||A===void 0?void 0:A.call(D,...g)});return Object.assign({},..._)}},u=b(0);return v.runAsync=async(...i)=>{y({loading:!0,params:i,status:"pending"}),u.value+=1;const g=u.value,{isBreak:_,breakResult:D=J()}=w("onBefore",i);if(_)return y({status:"settled"}),D;l==null||l(i);try{const A=()=>new Promise(x=>x(e(...S.value)));let{servicePromise:I}=w("onQuery",A);I||(I=A());const R=await I;return g!==u.value?J():(y({data:R,loading:!1,error:void 0,status:"settled"}),w("onSuccess",R,i),s==null||s(R,i),w("onAfter",i,R,void 0),d==null||d(i),R)}catch(A){if(g!==u.value)return J();throw y({loading:!1,error:A,status:"settled"}),w("onError",A,i),o==null||o(A,i),w("onAfter",i,void 0,A),d==null||d(i),A}},v.run=async(...i)=>{v.runAsync(...i).catch(g=>{o||console.error(g)})},v.cancel=()=>{u.value+=1,y({loading:!1}),w("onCancel")},v.refresh=()=>{v.run(...S.value||[])},v.refreshAsync=()=>v.runAsync(...S.value||[]),v.mutate=i=>{const g=G(i)?i(T.value):i,_=X(g)?Object.assign({},g):g;y({data:_}),w("onMutate",_)},{status:f,loading:h,data:T,error:E,params:S,plugins:m,context:v}};function ye(e,r={},n){const t=ke(en,{}),a={...nn(),...t,...r},{manual:c=!1,defaultParams:s=[]}=a,o=dn(e,a);if(o.plugins.value=n.map(l=>l(o,a)),!c){const l=o.params.value||s;o.context.run(...l)}return K(()=>{o.context.cancel()}),{loading:o.loading,data:o.data,error:o.error,params:o.params,cancel:o.context.cancel,refresh:o.context.refresh,refreshAsync:o.context.refreshAsync,mutate:o.context.mutate,run:o.context.run,runAsync:o.context.runAsync}}function An(e,r){const{isNoMore:n,...t}=r!=null?r:{},a=U(),c=L(()=>{var i;return((i=a.value)===null||i===void 0?void 0:i.list)||[]}),s=b(!1),o=b(!1),l=b(0),{runAsync:d,run:h,cancel:T,...E}=ye(async i=>{const g=l.value,_=await e(i);return g===l.value&&(i?a.value={..._,list:[...i.list,..._.list]}:a.value=_),_},{...t,defaultParams:[],refreshDepsAction:()=>{t!=null&&t.refreshDepsAction?t.refreshDepsAction():v()},onError:i=>{var g;t==null||(g=t.onError)===null||g===void 0||g.call(t,i)},onSuccess:i=>{var g;t==null||(g=t.onSuccess)===null||g===void 0||g.call(t,i)},onBefore:()=>{var i;l.value+=1,o.value&&(o.value=!1,s.value=!0),t==null||(i=t.onBefore)===null||i===void 0||i.call(t)},onAfter:()=>{var i;s.value=!1,o.value=!1,t==null||(i=t.onAfter)===null||i===void 0||i.call(t)}},[he,ge,Ee,we,Te]),S=L(()=>n&&G(n)?n(a.value):!1),m=()=>{f().catch(()=>{})},f=()=>S.value?Promise.reject(on("No more data. You need to ignore this error by checking if `noMore` is false before calling `loadMoreAsync`",!0)):(o.value=!0,d(a.value)),v=()=>h();return{data:a,dataList:c,loadingMore:s,noMore:S,cancel:()=>{l.value+=1,T(),s.value=!1},mutate:i=>{const g=G(i)?i(a.value):i,_=X(g)?Object.assign({},g):g;a.value=_},refresh:v,refreshAsync:()=>d(),loadMore:m,loadMoreAsync:f,...rn(E,["refresh","refreshAsync","mutate","params","data"])}}const z=new Map,fn=(e,r)=>{z.set(e,r),r.then(n=>(z.delete(e),n)).catch(()=>{z.delete(e)})},vn=e=>z.get(e),B=new Map,mn=(e,r)=>{B.has(e)&&B.get(e).forEach(n=>n(r))},gn=(e,r)=>(B.has(e)?B.get(e).push(r):B.set(e,[r]),()=>{const n=B.get(e).indexOf(r);B.get(e).splice(n,1)});var hn=C((e,{cacheKey:r,cacheTime:n=6e5,staleTime:t=0,getCache:a,setCache:c})=>{if(!r)return{};const s=G(r)?r:()=>r,o=b(()=>{});let l;const d=v=>a?a(v):an(v),h=(v,y,w)=>{c?c(v,w):sn(v,y,w),mn(v,w.data)},T=v=>t===-1||v+t>new Date().getTime(),E=(v,y)=>Object.prototype.hasOwnProperty.call(v,y),S=v=>{const y=s(v);return gn(y,w=>{e.data.value=w})},m=s(),f=d(m);return f&&E(f,"data")&&(e.data.value=f.data,e.params.value=f.params),m&&(o.value=S()),K(()=>{o.value()}),{onBefore(v){const y=s(v),w=d(y);if(!w||!E(w,"data"))return{};if(T(w.time))return e.data.value=w.data,e.loading.value=!1,{isBreak:!0,breakResult:w.data};e.data.value=w.data},onQuery(v){const y=e.params.value,w=s(y);let u=vn(w);return u&&u!==l?()=>u:(u=v(),l=u,fn(w,u),()=>u)},onSuccess(v,y){const w=s(y);w&&(o.value(),h(w,n,{data:v,params:y,time:new Date().getTime()}),o.value=S(y))},onMutate(v){const y=s(e.params.value);y&&(o.value(),h(y,n,{data:v,params:e.params.value,time:new Date().getTime()}),o.value=S(e.params.value))}}});function Tn(e){let r,n;class t extends Promise{constructor(c){super(c),this.cancel=()=>{n(),clearTimeout(r)}}}return new t(a=>{n=a,r=setTimeout(n,e)})}function Z(){return new Date().getTime()}var wn=C((e,{loadingDelay:r=0,loadingKeep:n=0})=>{const t=b(()=>{}),a=L(()=>O(r)),c=L(()=>O(n));let s=Z(),o={};const l=()=>{let d;return a.value&&(d=setTimeout(()=>{e.status.value==="pending"&&(e.loading.value=!0)},a.value)),()=>d&&clearTimeout(d)};return{onBefore(){e.loading.value=!a.value,t.value(),t.value=l(),s=Z()},onQuery(d){if(!c.value)return()=>d();o=Tn(c.value+a.value);const h=Promise.allSettled([d().finally(()=>{Z()-s<=a.value&&o.cancel()}),o]).then(T=>{const E=T[0];return E.status==="fulfilled"?E.value:Promise.reject(E.reason)});return()=>h},onCancel(){t.value()},onAfter(){t.value()}}}),q;const Re=new Set,Se=new Set,be=new Set,Y=(e,r)=>{let n;switch(e){case"FOCUS_LISTENER":n=Re;break;case"RECONNECT_LISTENER":n=be;break;case"VISIBLE_LISTENER":n=Se;break}if(!n.has(r))return n.add(r),()=>{n.delete(r)}},ee=e=>{e.forEach(r=>{r()})};!le&&(q=window)!==null&&q!==void 0&&q.addEventListener&&(window.addEventListener("visibilitychange",()=>{ve()&&ee(Se)},!1),window.addEventListener("focus",()=>ee(Re),!1),window.addEventListener("online",()=>ee(be),!1));var En=C((e,{pollingInterval:r,pollingWhenHidden:n=!1,pollingWhenOffline:t=!1,errorRetryCount:a=0})=>{const c=b(),s=b(!1),o=L(()=>O(r)),l=L(()=>O(a)),d=[],h=m=>{m&&d.push(m)},T=()=>(n||ve())&&(t||tn()),E=m=>{if(e.error.value&&l.value!==0)return;let f;if(!j(o.value)&&o.value>=0)if(T())f=setTimeout(m,o.value);else{s.value=!0;return}return()=>f&&clearTimeout(f)},S=()=>{s.value&&T()&&(e.context.refresh(),s.value=!1)};return W(o,()=>{c.value&&(c.value(),c.value=E(()=>e.context.refresh()))}),n||h(Y("VISIBLE_LISTENER",S)),t||h(Y("RECONNECT_LISTENER",S)),K(()=>{d.forEach(m=>m())}),{onBefore(){var m;(m=c.value)===null||m===void 0||m.call(c)},onCancel(){var m;(m=c.value)===null||m===void 0||m.call(c)},onAfter(){c.value=E(()=>e.context.refresh())}}});const yn=(e,r)=>{let n=!1;return(...t)=>{n||(n=!0,e(...t),setTimeout(()=>{n=!1},r))}};var Rn=C((e,{refreshOnWindowFocus:r=!1,refocusTimespan:n=5e3})=>{const t=L(()=>O(r)),a=L(()=>O(n)),c=[],s=l=>{l&&c.push(l)},o=()=>{c.forEach(l=>l())};return ie(()=>{if(o(),t.value){const l=yn(e.context.refresh,a.value);s(Y("VISIBLE_LISTENER",l)),s(Y("FOCUS_LISTENER",l))}}),K(()=>{o()}),{}});function xn(e,r){return ye(e,r,[wn,he,ge,En,Ee,Rn,we,Te,hn])}let ne=null;const On=(e,r=null)=>{let n=Ze.origin.replace(/\/$/,"");n=e.includes("http")?e:n+e;const t=new URL(n);if(r&&typeof r=="object")for(const a of Object.keys(r))t.searchParams.append(a,r[a]);return ne||(ne=Sn),ne(t)};async function Sn(e){return await(await fetch(e.toString())).json()}export{_n as I,Pn as P,Ln as S,An as a,Ze as c,On as r,xn as u};
